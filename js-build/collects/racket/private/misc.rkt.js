import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/main.rkt.js";import * as M1 from "../../../runtime/kernel.rkt.js";import * as M2 from "./path.rkt.js";var check1197 = function(x1200) {if (M1.real_p(x1200)!==false) {var if_res632 = M1.rvoid();} else {var if_res632 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("rationalize"),$rjs_core.UString.make("real?"),x1200);}return if_res632;};var find_between1198 = function(lo1201, hi1202) {if (M1.integer_p(lo1201)!==false) {var if_res634 = lo1201;} else {var lo_int1203 = M1.floor(lo1201);var hi_int1204 = M1.floor(hi1202);if (M1.__lt_(lo_int1203,hi_int1204)!==false) {var if_res633 = M1.add1(lo_int1203);} else {var if_res633 = lo_int1203+(1/find_between1198(1/(hi1202-lo_int1203),1/(lo1201-lo_int1203)));}var if_res634 = if_res633;}return if_res634;};var do_find_between1199 = function(lo1205, hi1206) {if (M1.negative_p(lo1205)!==false) {var if_res635 = M1.__(find_between1198(M1.__(hi1206),M1.__(lo1205)));} else {var if_res635 = find_between1198(lo1205,hi1206);}return if_res635;};var rationalize = function(x1207, within1208) {check1197(x1207);check1197(within1208);var delta1209 = M1.abs(within1208);var lo1210 = x1207-delta1209;var hi1211 = x1207+delta1209;if (M1.not(M1.__eq_(x1207,x1207))!==false) {var if_res645 = x1207;} else {var or_part1212 = M1.equal_p(x1207,Infinity);if (or_part1212!==false) {var if_res636 = or_part1212;} else {var if_res636 = M1.equal_p(x1207,-Infinity);}if (if_res636!==false) {if (M1.equal_p(delta1209,Infinity)!==false) {var if_res637 = NaN;} else {var if_res637 = x1207;}var if_res644 = if_res637;} else {if (M1.equal_p(delta1209,Infinity)!==false) {var if_res643 = 0.0;} else {if (M1.not(M1.__eq_(within1208,within1208))!==false) {var if_res642 = within1208;} else {if (M1.__lt__eq_(lo1210,0,hi1211)!==false) {if (M1.exact_p(x1207)!==false) {var if_res638 = 0;} else {var if_res638 = 0.0;}var if_res641 = if_res638;} else {var or_part1213 = M1.__rjs_quoted__.inexact_p(lo1210);if (or_part1213!==false) {var if_res639 = or_part1213;} else {var if_res639 = M1.__rjs_quoted__.inexact_p(hi1211);}if (if_res639!==false) {var if_res640 = M1.exact__gt_inexact(do_find_between1199(M1.inexact__gt_exact(lo1210),M1.inexact__gt_exact(hi1211)));} else {var if_res640 = do_find_between1199(lo1210,hi1211);}var if_res641 = if_res640;}var if_res642 = if_res641;}var if_res643 = if_res642;}var if_res644 = if_res643;}var if_res645 = if_res644;}return if_res645;};var load_by_cd = function(n1214) {if (M2.path_string_p(n1214)!==false) {var if_res646 = M1.rvoid();} else {var if_res646 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("load/cd"),$rjs_core.UString.make("path-string?"),n1214);}if_res646;var let_result647 = M1.__rjs_quoted__.split_path(n1214);var base1215 = let_result647.getAt(0);var name1216 = let_result647.getAt(1);var dir_p1217 = let_result647.getAt(2);if (dir_p1217!==false) {var if_res650 = M1.raise(M1.__rjs_quoted__.exn_fail_filesystem(M1.string__gt_immutable_string(M1.format($rjs_core.UString.make("load/cd: cannot open a directory: ~s"),n1214)),M1.current_continuation_marks()));} else {if (M1.not(M1.path_p(base1215))!==false) {var if_res649 = M0.__rjs_quoted__.load(n1214);} else {if (M1.not(M1.__rjs_quoted__.directory_exists_p(base1215))!==false) {var if_res648 = M1.raise(M1.__rjs_quoted__.exn_fail_filesystem(M1.string__gt_immutable_string(M1.format($rjs_core.UString.make("load/cd: directory of ~s does not exist (current directory is ~s)"),n1214,M1.__rjs_quoted__.current_directory())),M1.current_continuation_marks()));} else {var if_res648 = M1.rvoid();}if_res648;var orig1218 = M1.__rjs_quoted__.current_directory();var if_res649 = M1.dynamic_wind(function() {return M1.__rjs_quoted__.current_directory(base1215);},function() {return M0.__rjs_quoted__.load(name1216);},function() {return M1.__rjs_quoted__.current_directory(orig1218);});}var if_res650 = if_res649;}return if_res650;};var __load = function(load1219, name1220, path1221) {if (M2.path_string_p(path1221)!==false) {var if_res651 = M1.rvoid();} else {var if_res651 = M1.raise_argument_error(name1220,$rjs_core.UString.make("path-string?"),path1221);}if_res651;if (M1.__rjs_quoted__.complete_path_p(path1221)!==false) {var if_res653 = load1219(path1221);} else {var dir1222 = M1.__rjs_quoted__.current_load_relative_directory();if (dir1222!==false) {var if_res652 = M1.__rjs_quoted__.path__gt_complete_path(path1221,dir1222);} else {var if_res652 = path1221;}var if_res653 = load1219(if_res652);}return if_res653;};var load_relative = function(path1223) {return __load(M0.__rjs_quoted__.load,$rjs_core.PrimitiveSymbol.make("load-relative"),path1223);};var load_relative_extension = function(path1224) {return __load(M0.__rjs_quoted__.load_extension,$rjs_core.PrimitiveSymbol.make("load-relative-extension"),path1224);};var let_result654 = M1.make_struct_type($rjs_core.PrimitiveSymbol.make("evt"),false,1,0,false,M1.list(M1.cons(M1.prop_evt,0)),M1.current_inspector(),false,$rjs_core.Pair.makeList(0));var struct_guard = let_result654.getAt(0);var make_guard = let_result654.getAt(1);var guard_p = let_result654.getAt(2);var guard_ref = let_result654.getAt(3);var guard_set_bang_ = let_result654.getAt(4);var guard_evt = function(proc1225) {if (M1.procedure_p(proc1225)!==false) {var if_res655 = M1.procedure_arity_includes_p(proc1225,0);} else {var if_res655 = false;}if (if_res655!==false) {var if_res656 = M1.rvoid();} else {var if_res656 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("guard-evt"),$rjs_core.UString.make("(any/c . -> . evt?)"),proc1225);}if_res656;return make_guard(function(self1226) {return proc1225();});};var channel_get = function(ch1227) {if (M1.__rjs_quoted__.channel_p(ch1227)!==false) {var if_res657 = M1.rvoid();} else {var if_res657 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-get"),$rjs_core.UString.make("channel?"),ch1227);}if_res657;return M1.__rjs_quoted__.sync(ch1227);};var channel_try_get = function(ch1228) {if (M1.__rjs_quoted__.channel_p(ch1228)!==false) {var if_res658 = M1.rvoid();} else {var if_res658 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-try-get"),$rjs_core.UString.make("channel?"),ch1228);}if_res658;return M1.__rjs_quoted__.sync_by_timeout(0,ch1228);};var channel_put = function(ch1229, val1230) {if (M1.__rjs_quoted__.channel_p(ch1229)!==false) {var if_res659 = M1.rvoid();} else {var if_res659 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("channel-put"),$rjs_core.UString.make("channel?"),ch1229);}if_res659;if (M1.__rjs_quoted__.sync(M1.__rjs_quoted__.channel_put_evt(ch1229,val1230))!==false) {var if_res660 = M1.rvoid();} else {var if_res660 = false;}return if_res660;};var port_p = function(x1231) {var or_part1232 = M1.input_port_p(x1231);if (or_part1232!==false) {var if_res661 = or_part1232;} else {var if_res661 = M1.output_port_p(x1231);}return if_res661;};var cl662 = function(v1233) {return writeln(v1233,M1.current_output_port());};var cl663 = function(v1234, p1235) {if (M1.output_port_p(p1235)!==false) {var if_res665 = M1.rvoid();} else {var if_res665 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("writeln"),$rjs_core.UString.make("output-port?"),1,v1234,p1235);}if_res665;M1.write(v1234,p1235);return M1.newline(p1235);};var writeln = $rjs_core.attachProcedureArity(function() {var fixed_lam664 = {'1':cl662,'2':cl663}[arguments.length];if (fixed_lam664!==undefined) {return fixed_lam664.apply(null,arguments);} else {return M1.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl666 = function(v1236) {return displayln(v1236,M1.current_output_port());};var cl667 = function(v1237, p1238) {if (M1.output_port_p(p1238)!==false) {var if_res669 = M1.rvoid();} else {var if_res669 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("displayln"),$rjs_core.UString.make("output-port?"),1,v1237,p1238);}if_res669;M1.display(v1237,p1238);return M1.newline(p1238);};var displayln = $rjs_core.attachProcedureArity(function() {var fixed_lam668 = {'1':cl666,'2':cl667}[arguments.length];if (fixed_lam668!==undefined) {return fixed_lam668.apply(null,arguments);} else {return M1.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl670 = function(v1239) {return println(v1239,M1.current_output_port(),0);};var cl671 = function(v1240, p1241) {return println(v1240,p1241,0);};var cl672 = function(v1242, p1243, d1244) {if (M1.output_port_p(p1243)!==false) {var if_res674 = M1.rvoid();} else {var if_res674 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("println"),$rjs_core.UString.make("output-port?"),1,v1242,p1243,d1244);}if_res674;if (M1.number_p(d1244)!==false) {var or_part1245 = M1.__eq_(0,d1244);if (or_part1245!==false) {var if_res675 = or_part1245;} else {var if_res675 = M1.__eq_(d1244,1);}var if_res676 = if_res675;} else {var if_res676 = false;}if (if_res676!==false) {var if_res677 = M1.rvoid();} else {var if_res677 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("println"),$rjs_core.UString.make("(or/c 0 1)"),2,v1242,p1243,d1244);}if_res677;M1.print(v1242,p1243,d1244);return M1.newline(p1243);};var println = $rjs_core.attachProcedureArity(function() {var fixed_lam673 = {'1':cl670,'2':cl671,'3':cl672}[arguments.length];if (fixed_lam673!==undefined) {return fixed_lam673.apply(null,arguments);} else {return M1.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3]);var string_no_nuls_p = function(s1246) {if (M1.string_p(s1246)!==false) {var if_res678 = M1.not(M1.regexp_match_p($rjs_core.Regexp.fromString("\u0000"),s1246));} else {var if_res678 = false;}return if_res678;};var bytes_environment_variable_name_p = function(s1247) {if (M1.bytes_p(s1247)!==false) {if (M1.eq_p($rjs_core.PrimitiveSymbol.make("windows"),M1.system_type())!==false) {var if_res679 = M1.regexp_match_p($rjs_core.Regexp.fromString("^[^\u0000=]+$"),s1247);} else {var if_res679 = M1.regexp_match_p($rjs_core.Regexp.fromString("^[^\u0000=]*$"),s1247);}var if_res680 = if_res679;} else {var if_res680 = false;}return if_res680;};var string_environment_variable_name_p = function(s1248) {if (M1.string_p(s1248)!==false) {var if_res681 = bytes_environment_variable_name_p(M1.string__gt_bytes_by_locale(s1248,M1.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));} else {var if_res681 = false;}return if_res681;};var getenv = function(s1249) {if (string_environment_variable_name_p(s1249)!==false) {var if_res682 = M1.rvoid();} else {var if_res682 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("getenv"),$rjs_core.UString.make("string-environment-variable-name?"),s1249);}if_res682;var v1250 = M1.environment_variables_ref(M1.current_environment_variables(),M1.string__gt_bytes_by_locale(s1249,M1.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));if (v1250!==false) {var if_res683 = M1.__rjs_quoted__.bytes__gt_string_by_locale(v1250,$rjs_core.Char.charFromCodepoint(63));} else {var if_res683 = false;}return if_res683;};var putenv = function(s1251, t1252) {if (string_no_nuls_p(s1251)!==false) {var if_res684 = M1.rvoid();} else {var if_res684 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("putenv"),$rjs_core.UString.make("string-environment-variable-name?"),0,s1251,t1252);}if_res684;if (string_no_nuls_p(t1252)!==false) {var if_res685 = M1.rvoid();} else {var if_res685 = M1.raise_argument_error($rjs_core.PrimitiveSymbol.make("putenv"),$rjs_core.UString.make("string-no-nuls?"),1,s1251,t1252);}if_res685;if (M1.environment_variables_set_bang_(M1.current_environment_variables(),M1.string__gt_bytes_by_locale(s1251,M1.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),M1.string__gt_bytes_by_locale(t1252,M1.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),function() {return false;})!==false) {var if_res686 = true;} else {var if_res686 = false;}return if_res686;};var __rjs_quoted__ = {};export { __rjs_quoted__,putenv,getenv,string_environment_variable_name_p,bytes_environment_variable_name_p,println,displayln,writeln,port_p,channel_put,channel_try_get,channel_get,guard_evt,load_relative_extension,load_relative,load_by_cd,rationalize };